# Backend environment variables
# Copy to backend/.env and fill values.

# Postgres connection string, e.g.
# postgresql://USER:PASSWORD@HOST:5432/DBNAME
# If the password contains '@', encode it as '%40'.
# For Supabase, SSL is required, so add '?sslmode=require'.
DATABASE_URL=

# Used to sign JWTs (cookie-based auth)
# Use a long random secret in production.
JWT_SECRET_KEY=

# Cookie SameSite policy: lax | strict | none
# If frontend and backend are on different "sites" (different eTLD+1), use: none
COOKIE_SAMESITE=lax

# Runtime environment: development | production
ENVIRONMENT=development

# Multi-tenant mode:
# - shared: legacy single-tenant behavior, but enforced as tenant_id IS NULL
# - per_user: strict isolation; every request is scoped to the logged-in admin (tenant derived from user)
# - per_tenant: strict isolation; token must include tenant_id and must match user.tenant_id
TENANT_MODE=per_tenant

# Allowed frontend origin for CORS
FRONTEND_ORIGIN=http://localhost:5173

# Allow self-service account creation.
# Recommended: false in production; true in local dev.
ALLOW_SIGNUP=true

# Default role assigned during self-service signup: USER | ADMIN
# WARNING: setting ADMIN + ALLOW_SIGNUP=true effectively allows anyone to become an admin.
SIGNUP_DEFAULT_ROLE=USER

# Optional: credentials used by backend/_diag_tenant_isolation_smoke.py
# SMOKE_ADMIN1_USERNAME=
# SMOKE_ADMIN1_PASSWORD=
# SMOKE_ADMIN2_USERNAME=
# SMOKE_ADMIN2_PASSWORD=
